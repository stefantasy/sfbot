<robot
  name="sfbot_description">
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="-0.00934065646178173 -6.10139716528124E-11 0.0620631987265113"
        rpy="0 0 0" />
      <mass
        value="1.12970232983621" />
      <inertia
        ixx="0.0124245743941207"
        ixy="-6.43454550021862E-12"
        ixz="0.00203166513904835"
        iyy="0.0144061864767431"
        iyz="1.41419700554324E-11"
        izz="0.0121452983325168" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.298039215686275 0.298039215686275 0.298039215686275 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="left_wheel_link">
    <inertial>
      <origin
        xyz="-0.0187698324757432 2.67563748934663E-14 1.07552855510562E-14"
        rpy="0 0 0" />
      <mass
        value="0.209351737220227" />
      <inertia
        ixx="0.000404640656994838"
        ixy="-2.80165011458298E-16"
        ixz="-1.12742396140949E-16"
        iyy="0.000207814987613485"
        iyz="2.03287907341032E-20"
        izz="0.000207814987613485" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/left_wheel_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.298039215686275 0.298039215686275 0.298039215686275 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/left_wheel_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="left_wheel"
    type="continuous">
    <origin
      xyz="0 0.119 -0.038"
      rpy="2.75908243987535 5.90138314899544E-39 -1.57079632679643" />
    <parent
      link="base_link" />
    <child
      link="left_wheel_link" />
    <axis
      xyz="-1 0 0" />
  </joint>
  <link
    name="right_wheel_link">
    <inertial>
      <origin
        xyz="-0.0187698324757432 2.81719092498633E-15 -2.85882428840978E-14"
        rpy="0 0 0" />
      <mass
        value="0.209351737220227" />
      <inertia
        ixx="0.000404640656994838"
        ixy="-3.06548840227999E-17"
        ixz="2.99852511154382E-16"
        iyy="0.000207814987613485"
        iyz="0"
        izz="0.000207814987613485" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/right_wheel_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.298039215686275 0.298039215686275 0.298039215686275 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/right_wheel_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="right_wheel"
    type="continuous">
    <origin
      xyz="0 -0.119 -0.038"
      rpy="-1.67259208298557 -5.90138314899544E-39 1.57079632679337" />
    <parent
      link="base_link" />
    <child
      link="right_wheel_link" />
    <axis
      xyz="1 0 0" />
  </joint>
  <link
    name="laser_link">
    <inertial>
      <origin
        xyz="-0.00116439147312708 4.41208791723824E-10 0.0189284573767456"
        rpy="0 0 0" />
      <mass
        value="0.148482326477962" />
      <inertia
        ixx="6.853078563179E-05"
        ixy="3.32222790483364E-13"
        ixz="1.39067547118918E-06"
        iyy="6.54042842831123E-05"
        iyz="-3.02067954444521E-12"
        izz="9.4133897820385E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/laser_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/laser_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="laser"
    type="fixed">
    <origin
      xyz="0 0 0.01"
      rpy="-9.62802897152538E-51 -6.28689575958092E-39 0" />
    <parent
      link="base_link" />
    <child
      link="laser_link" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="camera_link">
    <inertial>
      <origin
        xyz="0.00399310539251607 0.00255704490295461 0.000513929217654141"
        rpy="0 0 0" />
      <mass
        value="0.0192165264280458" />
      <inertia
        ixx="2.7697591865378E-05"
        ixy="-4.88427025209216E-09"
        ixz="4.04259133306888E-10"
        iyy="7.23354486409433E-07"
        iyz="3.27508783497781E-07"
        izz="2.71788391859005E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/camera_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.00784313725490196 0.23921568627451 0.823529411764706 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/camera_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="camera"
    type="fixed">
    <origin
      xyz="-0.0969999999998836 0.00100000000000011 0.35"
      rpy="5.90138314899544E-39 -6.28689575958092E-39 -1.53144402893157E-12" />
    <parent
      link="base_link" />
    <child
      link="camera_link" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="front_omni_link">
    <inertial>
      <origin
        xyz="2.94209101525666E-15 -0.0123238325039385 -0.00937815168178224"
        rpy="0 0 0" />
      <mass
        value="0.00444765485471871" />
      <inertia
        ixx="9.35603320673961E-07"
        ixy="4.30133918527574E-22"
        ixz="-7.51079996198149E-22"
        iyy="1.24804065267905E-06"
        iyz="-1.5045291474784E-07"
        izz="1.05120132986041E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/front_omni_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.776470588235294 0.756862745098039 0.737254901960784 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/front_omni_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="front_omni"
    type="continuous">
    <origin
      xyz="0.109 0 -0.045"
      rpy="-6.98505840665119E-39 -5.0557235306883E-39 1.69805986918832" />
    <parent
      link="base_link" />
    <child
      link="front_omni_link" />
    <axis
      xyz="0 0 1" />
  </joint>
  <link
    name="front_omni_wheel_link">
    <inertial>
      <origin
        xyz="0 -2.91433543964104E-15 5.55111512312578E-17"
        rpy="0 0 0" />
      <mass
        value="0.024828774916145" />
      <inertia
        ixx="3.28396875600809E-06"
        ixy="-4.96308367531817E-22"
        ixz="-5.29395592033938E-23"
        iyy="5.22177901108926E-06"
        iyz="-2.72638729897478E-21"
        izz="3.28396875600809E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/front_omni_wheel_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.298039215686275 0.298039215686275 0.298039215686275 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/front_omni_wheel_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="front_omni_wheel"
    type="continuous">
    <origin
      xyz="0 -0.0169999999999982 -0.03"
      rpy="3.14159265358979 -1.37961304336038 -1.5707963267949" />
    <parent
      link="front_omni_link" />
    <child
      link="front_omni_wheel_link" />
    <axis
      xyz="0 -1 0" />
  </joint>
  <link
    name="back_omni_link">
    <inertial>
      <origin
        xyz="2.77555756156289E-17 -0.0123238325039401 -0.00937815168178228"
        rpy="0 0 0" />
      <mass
        value="0.00444765485471874" />
      <inertia
        ixx="9.35603320673964E-07"
        ixy="-2.35581038455102E-21"
        ixz="8.15600083977285E-22"
        iyy="1.24804065267905E-06"
        iyz="-1.50452914747839E-07"
        izz="1.05120132986042E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/back_omni_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.776470588235294 0.756862745098039 0.737254901960784 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/back_omni_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="back_omni"
    type="continuous">
    <origin
      xyz="-0.109 0 -0.045"
      rpy="5.42123469618608E-39 -6.70534083637455E-39 0.0738795102106162" />
    <parent
      link="base_link" />
    <child
      link="back_omni_link" />
    <axis
      xyz="0 0 1" />
  </joint>
  <link
    name="back_omni_wheel_link">
    <inertial>
      <origin
        xyz="0 -5.55111512312578E-17 0"
        rpy="0 0 0" />
      <mass
        value="0.024828774916145" />
      <inertia
        ixx="3.28396875600809E-06"
        ixy="1.74700545371199E-21"
        ixz="3.63959469523332E-23"
        iyy="5.22177901108927E-06"
        iyz="-4.36751363427999E-22"
        izz="3.28396875600809E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/back_omni_wheel_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.298039215686275 0.298039215686275 0.298039215686275 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://sfbot_description/meshes/back_omni_wheel_link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="back_omni_wheel"
    type="continuous">
    <origin
      xyz="0 -0.0169999999999999 -0.03"
      rpy="3.14159265358979 0.72871893639004 -1.57079632679489" />
    <parent
      link="back_omni_link" />
    <child
      link="back_omni_wheel_link" />
    <axis
      xyz="0 -1 0" />
  </joint>
	<gazebo>
	<plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">

	<alwaysOn>true</alwaysOn>

        <legacyMode>true</legacyMode>

	<updateRate>30.0</updateRate>

	<leftJoint>right_wheel</leftJoint>

	<rightJoint>left_wheel</rightJoint>

	<wheelSeparation>0.258</wheelSeparation>

	<wheelAcceleration>0</wheelAcceleration>
        
        <wheelTorque>5</wheelTorque> 
	
        <odometrySource>1</odometrySource>

	<publishTf>1</publishTf>

	<wheelDiameter>0.126</wheelDiameter>

        <publishWheelTF>true</publishWheelTF>
        
	<publishWheelJointState>true</publishWheelJointState>


	<torque>20</torque>

	<commandTopic>cmd_vel</commandTopic>

	<odometryTopic>odom</odometryTopic>

	<odometryFrame>odom</odometryFrame>

	<robotBaseFrame>base_link</robotBaseFrame>

	</plugin>

        </gazebo>


        <gazebo reference="laser_link">

        <sensor type="ray" name="laser_sensor">

          <pose>0 0 0 0 0 0</pose>

          <visualize>True</visualize>

          <update_rate>40</update_rate>

          <ray>

            <scan>

              <horizontal>

                <samples>720</samples>

                <resolution>1</resolution>

                <min_angle>-1.570796</min_angle>

                <max_angle>1.570796</max_angle>

              </horizontal>

            </scan>

            <range>

              <min>0.10</min>

              <max>30.0</max>

              <resolution>0.01</resolution>

            </range>

            <noise>

              <type>gaussian</type>

              <!-- Noise parameters based on published spec for Hokuyo laser

                   achieving "+-30mm" accuracy at range < 10m.  A mean of 0.0m and

                   stddev of 0.01m will put 99.7% of samples within 0.03m of the true

                   reading. -->

              <mean>0.0</mean>

              <stddev>0.01</stddev>

            </noise>

          </ray>

          <plugin name="gazebo_ros_head_hokuyo_controller" filename="libgazebo_ros_laser.so">

            <topicName>/scan</topicName>

            <frameName>laser_link</frameName>

          </plugin>

        </sensor>

      </gazebo>


     <gazebo reference="camera_link">  
      <sensor type="depth" name="camera">
        <always_on>true</always_on>
        <update_rate>20.0</update_rate>
        <camera>
          <horizontal_fov>${0}</horizontal_fov>
          <image>
            <format>B8G8R8</format>
            <width>640</width>
            <height>480</height>
          </image>
          <clip>
            <near>0.05</near>
            <far>8.0</far>
          </clip>
        </camera>
        <plugin name="kinect_camera_controller" filename="libgazebo_ros_openni_kinect.so">
          <cameraName>camera</cameraName>
          <alwaysOn>true</alwaysOn>
          <updateRate>10</updateRate>
          <imageTopicName>rgb/image_raw</imageTopicName>
          <depthImageTopicName>depth/image_raw</depthImageTopicName>
          <pointCloudTopicName>depth/points</pointCloudTopicName>
          <cameraInfoTopicName>rgb/camera_info</cameraInfoTopicName>
          <depthImageCameraInfoTopicName>depth/camera_info</depthImageCameraInfoTopicName>
          <frameName>camera_link</frameName>
          <baseline>0.1</baseline>
          <distortion_k1>0.0</distortion_k1>
          <distortion_k2>0.0</distortion_k2>
          <distortion_k3>0.0</distortion_k3>
          <distortion_t1>0.0</distortion_t1>
          <distortion_t2>0.0</distortion_t2>
          <pointCloudCutoff>0.4</pointCloudCutoff>
        </plugin>
      </sensor>
    </gazebo>

</robot>
